# SolidFlow å®Œå–„è·¯çº¿å›¾

æœ¬æ–‡æ¡£è¯¦ç»†è§„åˆ’äº†å°† SolidFlow å®Œå–„è‡³å¯æ›¿ä»£ ReactFlow çš„è·¯çº¿å›¾ï¼ŒåŒ…æ‹¬åŠŸèƒ½å¯¹æ¯”ã€å®ç°è®¡åˆ’å’Œä¼˜å…ˆçº§ã€‚

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”è¡¨

### âœ… å·²å®ç°åŠŸèƒ½

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| åŸºç¡€èŠ‚ç‚¹æ¸²æŸ“ | âœ… | æ”¯æŒè‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹ |
| åŸºç¡€è¾¹æ¸²æŸ“ | âœ… | æ”¯æŒå¤šç§è¾¹ç±»å‹ï¼ˆstraight, bezier, smoothstepï¼‰ |
| èŠ‚ç‚¹æ‹–æ‹½ | âœ… | æ”¯æŒæ‹–æ‹½ç§»åŠ¨èŠ‚ç‚¹ |
| ç”»å¸ƒå¹³ç§»å’Œç¼©æ”¾ | âœ… | æ”¯æŒé¼ æ ‡æ»šè½®ç¼©æ”¾ã€æ‹–æ‹½å¹³ç§» |
| è¿æ¥ç‚¹ï¼ˆHandleï¼‰ | âœ… | æ”¯æŒ source/target è¿æ¥ç‚¹ |
| è¿æ¥åŠŸèƒ½ | âœ… | æ”¯æŒæ‹–æ‹½è¿æ¥èŠ‚ç‚¹ |
| èƒŒæ™¯ç½‘æ ¼ | âœ… | Background ç»„ä»¶ |
| æ§åˆ¶æŒ‰é’® | âœ… | Controls ç»„ä»¶ï¼ˆç¼©æ”¾ã€é€‚åˆè§†å›¾ï¼‰ |
| å°åœ°å›¾ | âœ… | MiniMap ç»„ä»¶ |
| é€‰æ‹©åŠŸèƒ½ | âœ… | æ”¯æŒå•é€‰å’Œå¤šé€‰ |
| è§†å›¾é€‚é… | âœ… | fitView åŠŸèƒ½ |
| è‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹ | âœ… | nodeTypes æ”¯æŒ |
| è‡ªå®šä¹‰è¾¹ç±»å‹ | âœ… | edgeTypes æ”¯æŒ |
| è¾¹åŠ¨ç”» | âœ… | animated å±æ€§ |
| è¾¹æ ‡è®°ï¼ˆç®­å¤´ï¼‰ | âœ… | markerStart/markerEnd |
| çŠ¶æ€ç®¡ç†å·¥å…· | âœ… | applyNodeChanges, applyEdgeChanges, addEdge |
| Hooks API | âœ… | useNodes, useEdges, useReactFlow |
| æ‹–æ”¾æ·»åŠ èŠ‚ç‚¹ | âœ… | onDragOver, onDrop æ”¯æŒ |
| æ’¤é”€/é‡åš | âœ… | å†å²è®°å½•ç®¡ç†ï¼Œæ”¯æŒ Ctrl+Z/Ctrl+Y |
| é”®ç›˜å¿«æ·é”® | âœ… | Deleteã€Ctrl+Aã€Ctrl+Z/Yã€Escape |
| è¾¹æ ‡ç­¾ç¼–è¾‘ | âœ… | åŒå‡»è¾¹æ ‡ç­¾è¿›è¡Œç¼–è¾‘ |
| è¾¹éªŒè¯ | âœ… | isValidConnection å›è°ƒ |

### ğŸš§ éœ€è¦å®ç°çš„åŠŸèƒ½

#### æ ¸å¿ƒåŠŸèƒ½ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ | è¯´æ˜ |
|------|--------|-----------|------|
| æ’¤é”€/é‡åš | ğŸ”´ é«˜ | 2-3å¤© | å†å²è®°å½•ç®¡ç†ï¼Œæ”¯æŒ Ctrl+Z/Ctrl+Y |
| é”®ç›˜å¿«æ·é”® | ğŸ”´ é«˜ | 2-3å¤© | Deleteåˆ é™¤ã€Ctrl+Aå…¨é€‰ã€Ctrl+C/Vå¤åˆ¶ç²˜è´´ç­‰ |
| è¾¹æ ‡ç­¾ç¼–è¾‘ | ğŸ”´ é«˜ | 1-2å¤© | æ”¯æŒåŒå‡»è¾¹æ ‡ç­¾è¿›è¡Œç¼–è¾‘ |
| èŠ‚ç‚¹åˆ é™¤å¿«æ·é”® | ğŸ”´ é«˜ | 0.5å¤© | Delete/Backspace åˆ é™¤é€‰ä¸­èŠ‚ç‚¹ |
| å¤åˆ¶ç²˜è´´èŠ‚ç‚¹ | ğŸŸ¡ ä¸­ | 2-3å¤© | Ctrl+Cå¤åˆ¶ï¼ŒCtrl+Vç²˜è´´ |
| èŠ‚ç‚¹å¯¹é½ | ğŸŸ¡ ä¸­ | 2-3å¤© | å¯¹é½è¾…åŠ©çº¿ã€ç½‘æ ¼å¯¹é½ |
| èŠ‚ç‚¹åˆ†ç»„ | ğŸŸ¡ ä¸­ | 3-5å¤© | æ”¯æŒåµŒå¥—èŠ‚ç‚¹ï¼ˆparentNodeï¼‰ |
| è¾¹éªŒè¯ | ğŸŸ¡ ä¸­ | 2-3å¤© | isValidConnection å›è°ƒ |
| è‡ªå®šä¹‰è¿æ¥è§„åˆ™ | ğŸŸ¡ ä¸­ | 1-2å¤© | æ”¯æŒè‡ªå®šä¹‰è¿æ¥éªŒè¯é€»è¾‘ |
| è¾¹ä¸­é—´ç‚¹ç¼–è¾‘ | ğŸŸ¡ ä¸­ | 2-3å¤© | æ”¯æŒæ‹–æ‹½è¾¹ä¸­é—´çš„æ§åˆ¶ç‚¹ |

#### é«˜çº§åŠŸèƒ½ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ | è¯´æ˜ |
|------|--------|-----------|------|
| èŠ‚ç‚¹è°ƒæ•´å¤§å° | ğŸŸ¡ ä¸­ | 2-3å¤© | æ”¯æŒæ‹–æ‹½è°ƒæ•´èŠ‚ç‚¹å¤§å° |
| èŠ‚ç‚¹æœ€å°åŒ–/æœ€å¤§åŒ– | ğŸŸ¢ ä½ | 1-2å¤© | æ”¯æŒèŠ‚ç‚¹æŠ˜å å±•å¼€ |
| è¾¹æ ‡ç­¾æ ·å¼ | ğŸŸ¡ ä¸­ | 1å¤© | æ”¯æŒè¾¹æ ‡ç­¾èƒŒæ™¯ã€æ ·å¼å®šåˆ¶ |
| èŠ‚ç‚¹å·¥å…·æ  | ğŸŸ¢ ä½ | 2-3å¤© | èŠ‚ç‚¹ä¸Šçš„æ“ä½œæŒ‰é’®ï¼ˆåˆ é™¤ã€å¤åˆ¶ç­‰ï¼‰ |
| æ‰¹é‡æ“ä½œ | ğŸŸ¡ ä¸­ | 2-3å¤© | æ‰¹é‡ç§»åŠ¨ã€æ‰¹é‡åˆ é™¤ç­‰ |
| å¯¼å…¥å¯¼å‡º | ğŸŸ¡ ä¸­ | 2-3å¤© | JSON æ ¼å¼å¯¼å…¥å¯¼å‡º |
| èŠ‚ç‚¹æœç´¢ | ğŸŸ¢ ä½ | 2-3å¤© | æœç´¢å¹¶å®šä½èŠ‚ç‚¹ |
| èŠ‚ç‚¹æ¨¡æ¿ | ğŸŸ¢ ä½ | 2-3å¤© | ä¿å­˜å’Œå¤ç”¨èŠ‚ç‚¹æ¨¡æ¿ |

#### æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ | è¯´æ˜ |
|------|--------|-----------|------|
| è™šæ‹Ÿæ»šåŠ¨ | ğŸŸ¡ ä¸­ | 3-5å¤© | å¤§é‡èŠ‚ç‚¹æ—¶çš„æ€§èƒ½ä¼˜åŒ– |
| èŠ‚ç‚¹æ‡’åŠ è½½ | ğŸŸ¢ ä½ | 2-3å¤© | æŒ‰éœ€æ¸²æŸ“èŠ‚ç‚¹ |
| è¾¹è·¯å¾„ç¼“å­˜ | ğŸŸ¡ ä¸­ | 1-2å¤© | ç¼“å­˜è¾¹è·¯å¾„è®¡ç®— |
| äº‹ä»¶é˜²æŠ– | ğŸŸ¡ ä¸­ | 1å¤© | ä¼˜åŒ–æ‹–æ‹½å’Œç¼©æ”¾æ€§èƒ½ |

#### ç”¨æˆ·ä½“éªŒå¢å¼ºï¼ˆä¸­ä½ä¼˜å…ˆçº§ï¼‰

| åŠŸèƒ½ | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ | è¯´æ˜ |
|------|--------|-----------|------|
| è¿æ¥é¢„è§ˆ | ğŸŸ¡ ä¸­ | 1-2å¤© | è¿æ¥æ—¶çš„é¢„è§ˆæ•ˆæœ |
| èŠ‚ç‚¹è¿æ¥æç¤º | ğŸŸ¢ ä½ | 1å¤© | æ‚¬åœæ—¶æ˜¾ç¤ºå¯è¿æ¥æç¤º |
| èŠ‚ç‚¹æ‹–æ‹½é¢„è§ˆ | ğŸŸ¢ ä½ | 1å¤© | æ‹–æ‹½èŠ‚ç‚¹æ—¶çš„é¢„è§ˆæ•ˆæœ |
| åŠ¨ç”»è¿‡æ¸¡ | ğŸŸ¢ ä½ | 2-3å¤© | èŠ‚ç‚¹ç§»åŠ¨ã€æ·»åŠ åˆ é™¤çš„åŠ¨ç”» |
| è§¦æ‘¸æ”¯æŒ | ğŸŸ¡ ä¸­ | 3-5å¤© | ç§»åŠ¨ç«¯è§¦æ‘¸æ‰‹åŠ¿æ”¯æŒ |
| è¾…åŠ©ç½‘æ ¼å¯¹é½ | ğŸŸ¡ ä¸­ | 1-2å¤© | æ‹–æ‹½æ—¶è‡ªåŠ¨å¯¹é½ç½‘æ ¼ |

## ğŸ“… å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼ˆ1-2å‘¨ï¼‰

**ç›®æ ‡**ï¼šå®ç°æœ€åŸºç¡€ä½†å¿…éœ€çš„åŠŸèƒ½ï¼Œä½¿ SolidFlow èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬çš„å·¥ä½œæµç¼–è¾‘éœ€æ±‚ã€‚

1. **æ’¤é”€/é‡åšåŠŸèƒ½** (2-3å¤©)
   - å®ç°å†å²è®°å½•ç®¡ç†
   - æ”¯æŒ undo/redo æ“ä½œ
   - é›†æˆåˆ° FlowInstance API

2. **é”®ç›˜å¿«æ·é”®** (2-3å¤©)
   - Delete/Backspace åˆ é™¤é€‰ä¸­å…ƒç´ 
   - Ctrl+A å…¨é€‰
   - Ctrl+C/V å¤åˆ¶ç²˜è´´
   - Ctrl+Z/Y æ’¤é”€é‡åš
   - Escape å–æ¶ˆé€‰æ‹©

3. **è¾¹æ ‡ç­¾ç¼–è¾‘** (1-2å¤©)
   - æ”¯æŒåŒå‡»è¾¹æ ‡ç­¾è¿›è¡Œç¼–è¾‘
   - è¾¹æ ‡ç­¾è¾“å…¥æ¡†ç»„ä»¶

4. **è¾¹éªŒè¯å’Œè¿æ¥è§„åˆ™** (2-3å¤©)
   - isValidConnection å›è°ƒ
   - è‡ªå®šä¹‰è¿æ¥éªŒè¯é€»è¾‘

### ç¬¬äºŒé˜¶æ®µï¼šé«˜çº§åŠŸèƒ½ï¼ˆ2-3å‘¨ï¼‰

**ç›®æ ‡**ï¼šå¢å¼ºç¼–è¾‘ä½“éªŒï¼Œæ”¯æŒæ›´å¤æ‚çš„åœºæ™¯ã€‚

1. **èŠ‚ç‚¹åˆ†ç»„** (3-5å¤©)
   - å®ç° parentNode æ”¯æŒ
   - åµŒå¥—èŠ‚ç‚¹çš„æ¸²æŸ“å’Œäº¤äº’
   - åˆ†ç»„èŠ‚ç‚¹çš„è¾¹ç•Œè®¡ç®—

2. **èŠ‚ç‚¹å¯¹é½** (2-3å¤©)
   - å¯¹é½è¾…åŠ©çº¿
   - ç½‘æ ¼å¯¹é½
   - æ™ºèƒ½å¯¹é½æç¤º

3. **è¾¹ä¸­é—´ç‚¹ç¼–è¾‘** (2-3å¤©)
   - æ”¯æŒæ‹–æ‹½è¾¹ä¸­é—´çš„æ§åˆ¶ç‚¹
   - è‡ªå®šä¹‰è¾¹è·¯å¾„

4. **å¯¼å…¥å¯¼å‡º** (2-3å¤©)
   - JSON æ ¼å¼å¯¼å…¥å¯¼å‡º
   - æ”¯æŒä¿å­˜å’ŒåŠ è½½å·¥ä½œæµ

### ç¬¬ä¸‰é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ–å’Œä½“éªŒå¢å¼ºï¼ˆ2-3å‘¨ï¼‰

**ç›®æ ‡**ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

1. **æ€§èƒ½ä¼˜åŒ–** (1å‘¨)
   - è™šæ‹Ÿæ»šåŠ¨
   - è¾¹è·¯å¾„ç¼“å­˜
   - äº‹ä»¶é˜²æŠ–ä¼˜åŒ–

2. **ç”¨æˆ·ä½“éªŒå¢å¼º** (1-2å‘¨)
   - è¿æ¥é¢„è§ˆ
   - åŠ¨ç”»è¿‡æ¸¡
   - è§¦æ‘¸æ”¯æŒ

3. **æ–‡æ¡£å’Œç¤ºä¾‹** (æŒç»­)
   - å®Œå–„ API æ–‡æ¡£
   - å¢åŠ æ›´å¤šç¤ºä¾‹
   - ç¼–å†™æœ€ä½³å®è·µæŒ‡å—

## ğŸ¯ å½“å‰é˜¶æ®µä»»åŠ¡

### å·²å®Œæˆçš„ä»»åŠ¡ âœ…

1. âœ… åˆ›å»ºè·¯çº¿å›¾æ–‡æ¡£
2. âœ… å®ç°æ’¤é”€/é‡åšåŠŸèƒ½
3. âœ… å®ç°é”®ç›˜å¿«æ·é”®
4. âœ… å®ç°è¾¹æ ‡ç­¾ç¼–è¾‘
5. âœ… å®ç°è¾¹éªŒè¯åŠŸèƒ½

### ä¸‹ä¸€æ­¥ä»»åŠ¡

1. â³ å®ç°å¤åˆ¶ç²˜è´´èŠ‚ç‚¹åŠŸèƒ½
2. â³ å®ç°èŠ‚ç‚¹å¯¹é½åŠŸèƒ½
3. â³ å®ç°èŠ‚ç‚¹åˆ†ç»„åŠŸèƒ½
4. â³ å®ç°è¾¹ä¸­é—´ç‚¹ç¼–è¾‘
5. â³ å¢åŠ æ›´å¤šç¤ºä¾‹å’Œæ–‡æ¡£

## ğŸ“ ç¤ºä¾‹è®¡åˆ’

### éœ€è¦æ–°å¢çš„ç¤ºä¾‹

1. **æ’¤é”€é‡åšç¤ºä¾‹** (`FlowUndoRedoExample.tsx`)
   - å±•ç¤ºæ’¤é”€é‡åšåŠŸèƒ½
   - å†å²è®°å½•å¯è§†åŒ–

2. **é”®ç›˜å¿«æ·é”®ç¤ºä¾‹** (`FlowKeyboardShortcutsExample.tsx`)
   - å±•ç¤ºæ‰€æœ‰æ”¯æŒçš„å¿«æ·é”®
   - å¿«æ·é”®æç¤ºé¢æ¿

3. **è¾¹æ ‡ç­¾ç¼–è¾‘ç¤ºä¾‹** (`FlowEdgeLabelExample.tsx`)
   - å±•ç¤ºè¾¹æ ‡ç­¾ç¼–è¾‘åŠŸèƒ½
   - ä¸åŒæ ·å¼çš„è¾¹æ ‡ç­¾

4. **èŠ‚ç‚¹åˆ†ç»„ç¤ºä¾‹** (`FlowNodeGroupExample.tsx`)
   - å±•ç¤ºåµŒå¥—èŠ‚ç‚¹åŠŸèƒ½
   - åˆ†ç»„èŠ‚ç‚¹çš„äº¤äº’

5. **å¯¼å…¥å¯¼å‡ºç¤ºä¾‹** (`FlowImportExportExample.tsx`)
   - å±•ç¤ºå·¥ä½œæµçš„ä¿å­˜å’ŒåŠ è½½
   - JSON æ ¼å¼ç¤ºä¾‹

6. **è¾¹éªŒè¯ç¤ºä¾‹** (`FlowEdgeValidationExample.tsx`)
   - å±•ç¤ºè‡ªå®šä¹‰è¿æ¥è§„åˆ™
   - è¿æ¥éªŒè¯æç¤º

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æ’¤é”€/é‡åšå®ç°

```typescript
// ä½¿ç”¨å‘½ä»¤æ¨¡å¼å®ç°
interface HistoryState {
  nodes: Node[];
  edges: Edge[];
  viewport: Viewport;
}

class HistoryManager {
  private history: HistoryState[] = [];
  private currentIndex: number = -1;
  private maxHistorySize: number = 50;
  
  push(state: HistoryState): void;
  undo(): HistoryState | null;
  redo(): HistoryState | null;
  canUndo(): boolean;
  canRedo(): boolean;
}
```

### é”®ç›˜å¿«æ·é”®å®ç°

```typescript
// åœ¨ Flow ç»„ä»¶ä¸­ç›‘å¬é”®ç›˜äº‹ä»¶
const handleKeyDown = (event: KeyboardEvent) => {
  if (event.key === 'Delete' || event.key === 'Backspace') {
    // åˆ é™¤é€‰ä¸­å…ƒç´ 
  }
  if (event.ctrlKey || event.metaKey) {
    if (event.key === 'a') {
      // å…¨é€‰
    }
    if (event.key === 'c') {
      // å¤åˆ¶
    }
    if (event.key === 'v') {
      // ç²˜è´´
    }
    if (event.key === 'z') {
      // æ’¤é”€
    }
    if (event.key === 'y') {
      // é‡åš
    }
  }
};
```

### è¾¹æ ‡ç­¾ç¼–è¾‘å®ç°

```typescript
// åœ¨ Edge ç»„ä»¶ä¸­æ·»åŠ å¯ç¼–è¾‘æ ‡ç­¾
const EditableEdgeLabel: Component<{edge: Edge, onUpdate: (label: string) => void}> = (props) => {
  const [isEditing, setIsEditing] = createSignal(false);
  const [label, setLabel] = createSignal(props.edge.label || '');
  
  const handleDoubleClick = () => {
    setIsEditing(true);
  };
  
  const handleBlur = () => {
    setIsEditing(false);
    props.onUpdate(label());
  };
  
  return (
    <Show
      when={isEditing()}
      fallback={
        <text onDblClick={handleDoubleClick}>{label()}</text>
      }
    >
      <foreignObject>
        <input
          value={label()}
          onInput={(e) => setLabel(e.currentTarget.value)}
          onBlur={handleBlur}
          autoFocus
        />
      </foreignObject>
    </Show>
  );
};
```

## ğŸ“š å‚è€ƒèµ„æº

- [ReactFlow å®˜æ–¹æ–‡æ¡£](https://reactflow.dev/)
- [ReactFlow GitHub](https://github.com/xyflow/xyflow)
- [SolidJS å®˜æ–¹æ–‡æ¡£](https://www.solidjs.com/)

## ğŸ‰ å®Œæˆæ ‡å‡†

SolidFlow å¯ä»¥è¢«è®¤ä¸ºæ˜¯ ReactFlow çš„å®Œæ•´æ›¿ä»£å“ï¼Œå½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼š

1. âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°
2. âœ… æ€§èƒ½è¾¾åˆ°æˆ–æ¥è¿‘ ReactFlow æ°´å¹³
3. âœ… API è®¾è®¡æ¸…æ™°ä¸”æ˜“äºä½¿ç”¨
4. âœ… æ–‡æ¡£å®Œæ•´ï¼Œç¤ºä¾‹ä¸°å¯Œ
5. âœ… æ”¯æŒå¸¸è§çš„å·¥ä½œæµç¼–è¾‘åœºæ™¯
6. âœ… ç¤¾åŒºåé¦ˆè‰¯å¥½

---

**æœ€åæ›´æ–°**: 2024å¹´
**ç»´æŠ¤è€…**: SolidFlow å›¢é˜Ÿ
